{"version":3,"file":"request.js","sources":["utils/request.js"],"sourcesContent":["const BASE_URL = 'http://localhost:8080/api'\r\n\r\nexport default function request(config = {}) {\r\n\tlet {\r\n\t\turl,\r\n\t\theader = {},\r\n\t\tdata = {},\r\n\t\tmethod\r\n\t} = config\r\n\r\n\r\n\t// header['access-key']='ljy123ljy'\r\n\turl = BASE_URL + url\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tuni.request({\r\n\t\t\turl,\r\n\t\t\theader,\r\n\t\t\tmethod,\r\n\t\t\tdata,\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\tmessage\r\n\t\t\t\t\t} = res.data\r\n\t\t\t\t\tif (code === 200) {\r\n\t\t\t\t\t\tresolve(res.data)\r\n\t\t\t\t\t} else if (code === 400) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: \"错误提示\",\r\n\t\t\t\t\t\t\tcontent: message,\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tresolve(res.data)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: res.errMsg,\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail(error) {\r\n\t\t\t\treject(error)\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}"],"names":["uni"],"mappings":";;AAAA,MAAM,WAAW;AAEF,SAAS,QAAQ,SAAS,IAAI;AAC5C,MAAI;AAAA,IACH;AAAA,IACA,SAAS,CAAE;AAAA,IACX,OAAO,CAAE;AAAA,IACT;AAAA,EACF,IAAK;AAIJ,QAAM,WAAW;AAEjB,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvCA,kBAAAA,MAAI,QAAQ;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,QAAQ,KAAK;AACZ,YAAI,IAAI,eAAe,KAAK;AAC3B,cAAI;AAAA,YACH;AAAA,YACA;AAAA,UACA,IAAG,IAAI;AACR,cAAI,SAAS,KAAK;AACjB,oBAAQ,IAAI,IAAI;AAAA,UACtB,WAAgB,SAAS,KAAK;AACxBA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,SAAS;AAAA,cACT,YAAY;AAAA,YACnB,CAAO;AACD,oBAAQ,IAAI,IAAI;AAAA,UAChB;AAAA,QACN,OAAW;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI;AAAA,YACX,MAAM;AAAA,UACZ,CAAM;AAAA,QACD;AAAA,MACD;AAAA,MACD,KAAK,OAAO;AACX,eAAO,KAAK;AAAA,MACZ;AAAA,IACJ,CAAG;AAAA,EACH,CAAE;AACF;;"}
{"version":3,"file":"publishActivity.js","sources":["pages/user/publishActivity/publishActivity.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9wdWJsaXNoQWN0aXZpdHkvcHVibGlzaEFjdGl2aXR5LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"publish-activity container\">\r\n\t\t<uni-forms ref=\"formRef\" :modelValue=\"form\" :rules=\"rules\" label-position=\"top\" label-width=\"120\"\r\n\t\t\tvalidate-trigger=\"bind\">\r\n\t\t\t<uni-forms-item label=\"活动名称\" name=\"title\" required>\r\n\t\t\t\t<uni-easyinput v-model=\"form.title\" placeholder=\"请输入活动名称\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"活动介绍\" name=\"intro\" required>\r\n\t\t\t\t<uni-easyinput v-model=\"form.intro\" type=\"textarea\" placeholder=\"请填写活动介绍\" :auto-height=\"true\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"活动类型\" name=\"type\" required>\r\n\t\t\t\t<uni-data-select v-model=\"form.type\" :localdata=\"typeOptions\" placeholder=\"请选择活动类型\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"活动地点\" name=\"location\" required>\r\n\t\t\t\t<uni-data-select v-model=\"form.location\" :localdata=\"locationOptions\" placeholder=\"请选择活动地点\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"活动主办方\" name=\"organizer\" required>\r\n\t\t\t\t<uni-data-select v-model=\"form.organizer\" :localdata=\"organizerOptions\" placeholder=\"请选择主办方\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"参与须知\" name=\"notice\" required>\r\n\t\t\t\t<uni-easyinput v-model=\"form.notice\" type=\"textarea\" placeholder=\"请填写参与须知\" :auto-height=\"true\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"活动报名时间\" name=\"signupRange\" required>\r\n\t\t\t\t<uni-datetime-picker v-model=\"form.signupRange\" type=\"datetimerange\" range-separator=\"至\"\r\n\t\t\t\t\tstart-placeholder=\"报名开始时间\" end-placeholder=\"报名结束时间\" :end=\"signupEndLimit\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"活动开始时间\" name=\"activityRange\" required>\r\n\t\t\t\t<uni-datetime-picker v-model=\"form.activityRange\" type=\"datetimerange\" range-separator=\"至\"\r\n\t\t\t\t\tstart-placeholder=\"活动开始时间\" end-placeholder=\"活动结束时间\" :start=\"activityStartLimit\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"最大报名人数\" name=\"maxParticipants\" required>\r\n\t\t\t\t<uni-number-box v-model=\"form.maxParticipants\" :min=\"1\" :max=\"9999\" :step=\"1\" background=\"#f5f5f5\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"人员是否要审核\" name=\"needReview\" required>\r\n\t\t\t\t<uni-data-checkbox v-model=\"form.needReview\" :localdata=\"reviewOptions\" mode=\"button\" />\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<uni-forms-item label=\"材料上传\" name=\"materials\" required>\r\n\t\t\t\t<uni-file-picker v-model=\"form.materials\" fileMediatype=\"image\" limit=\"5\" :auto-upload=\"false\"\r\n\t\t\t\t\tmode=\"list\" />\r\n\t\t\t\t<view class=\"tip-text\">至少上传 1 张，最多 5 张图片</view>\r\n\t\t\t</uni-forms-item>\r\n\r\n\t\t\t<button class=\"submit-btn\" type=\"primary\" @click=\"handleSubmit\">提交</button>\r\n\t\t</uni-forms>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tcomputed,\r\n\t\treactive,\r\n\t\tref\r\n\t} from 'vue'\r\n\r\n\tconst formRef = ref(null)\r\n\tconst form = reactive({\r\n\t\ttitle: '',\r\n\t\tintro: '',\r\n\t\ttype: '',\r\n\t\tlocation: '',\r\n\t\torganizer: '',\r\n\t\tnotice: '',\r\n\t\tsignupRange: [],\r\n\t\tactivityRange: [],\r\n\t\tmaxParticipants: '1',\r\n\t\tneedReview: '1',\r\n\t\tmaterials: []\r\n\t})\r\n\r\n\t// 报名结束不可晚于活动开始；活动开始不可早于报名结束\r\n\tconst signupEndLimit = computed(() => form.activityRange?.[0] || '')\r\n\tconst activityStartLimit = computed(() => form.signupRange?.[1] || '')\r\n\r\n\r\n\tconst typeOptions = [{\r\n\t\t\ttext: '学术讲座',\r\n\t\t\tvalue: 'lecture'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '文体活动',\r\n\t\t\tvalue: 'sports'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '志愿服务',\r\n\t\t\tvalue: 'volunteer'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '竞赛赛事',\r\n\t\t\tvalue: 'competition'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '其他',\r\n\t\t\tvalue: 'other'\r\n\t\t}\r\n\t]\r\n\r\n\tconst locationOptions = [{\r\n\t\t\ttext: '主楼报告厅',\r\n\t\t\tvalue: 'hall'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '体育馆',\r\n\t\t\tvalue: 'gym'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '教学楼',\r\n\t\t\tvalue: 'classroom'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '图书馆',\r\n\t\t\tvalue: 'library'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '户外场地',\r\n\t\t\tvalue: 'outdoor'\r\n\t\t}\r\n\t]\r\n\r\n\tconst organizerOptions = [{\r\n\t\t\ttext: '学生会',\r\n\t\t\tvalue: 'student_union'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '社团联合会',\r\n\t\t\tvalue: 'association_union'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '研究生会',\r\n\t\t\tvalue: 'postgraduate_union'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '学院',\r\n\t\t\tvalue: 'college'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '其他',\r\n\t\t\tvalue: 'other'\r\n\t\t}\r\n\t]\r\n\r\n\tconst reviewOptions = [{\r\n\t\t\ttext: '需要审核',\r\n\t\t\tvalue: '1'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '无需审核',\r\n\t\t\tvalue: '0'\r\n\t\t}\r\n\t]\r\n\r\n\tconst rules = {\r\n\t\ttitle: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请填写活动名称'\r\n\t\t},\r\n\t\tintro: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请填写活动介绍'\r\n\t\t},\r\n\t\ttype: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请选择活动类型'\r\n\t\t},\r\n\t\tlocation: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请选择活动地点'\r\n\t\t},\r\n\t\torganizer: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请选择主办方'\r\n\t\t},\r\n\t\tnotice: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请填写参与须知'\r\n\t\t},\r\n\t\tsignupRange: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请选择报名时间'\r\n\t\t},\r\n\t\tactivityRange: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请选择活动时间'\r\n\t\t},\r\n\t\tmaxParticipants: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请输入最大报名人数',\r\n\t\t\tvalidator: (rule, value, callback) => {\r\n\t\t\t\tconst num = Number(value)\r\n\t\t\t\tif (Number.isNaN(num) || num <= 0 || !Number.isInteger(num)) {\r\n\t\t\t\t\tcallback('请输入正整数')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tcallback()\r\n\t\t\t}\r\n\t\t},\r\n\t\tneedReview: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请选择是否需要审核'\r\n\t\t},\r\n\t\tmaterials: {\r\n\t\t\trequired: true,\r\n\t\t\terrorMessage: '请至少上传 1 张图片',\r\n\t\t\tvalidator: (rule, value, callback) => {\r\n\t\t\t\tif (!Array.isArray(value) || value.length < 1) {\r\n\t\t\t\t\tcallback('请至少上传 1 张图片')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (value.length > 5) {\r\n\t\t\t\t\tcallback('最多上传 5 张图片')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tcallback()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tformRef.value\r\n\t\t\t.validate()\r\n\t\t\t.then(() => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '校验通过，可提交',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t})\r\n\t\t\t\t// TODO: 提交表单数据到后端\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.warn('表单校验未通过', err)\r\n\t\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.publish-activity {\r\n\t\tbackground: #f7f8fa;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\r\n\t.uni-forms {\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.04);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12rpx;\r\n\t}\r\n\r\n\t.tip-text {\r\n\t\tmargin-top: 8rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\tmargin-top: 32rpx;\r\n\t\twidth: 100%;\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/House/Desktop/graduation-project/campus_activity/pages/user/publishActivity/publishActivity.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","computed","uni"],"mappings":"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"}
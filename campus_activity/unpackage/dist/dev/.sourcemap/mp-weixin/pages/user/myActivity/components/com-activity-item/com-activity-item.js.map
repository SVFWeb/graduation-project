{"version":3,"file":"com-activity-item.js","sources":["pages/user/myActivity/components/com-activity-item/com-activity-item.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvSG91c2UvRGVza3RvcC9ncmFkdWF0aW9uLXByb2plY3QvY2FtcHVzX2FjdGl2aXR5L3BhZ2VzL3VzZXIvbXlBY3Rpdml0eS9jb21wb25lbnRzL2NvbS1hY3Rpdml0eS1pdGVtL2NvbS1hY3Rpdml0eS1pdGVtLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"com-activity-item\">\r\n\t\t<view class=\"activity_info\">\r\n\t\t\t<view class=\"activity_info_left\">\r\n\t\t\t\t<image :src=\"activeInfo.imageUrls[0]\" mode=\"aspectFill\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"activity_info_right\">\r\n\t\t\t\t<view class=\"title\">{{ activeInfo.name }}</view>\r\n\t\t\t\t<view class=\"type\">{{ activeInfo.activityType }}</view>\r\n\t\t\t\t<view class=\"timer\">{{ formatTime(activeInfo.startTime,'YYYY.MM.DD hh:mm') }} 至\r\n\t\t\t\t\t{{ formatTime(activeInfo.endTime,'YYYY.MM.DD hh:mm') }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"activity_btn\">\r\n\t\t\t<view class=\"btn_item\" @click=\"onActivityDetail\">\r\n\t\t\t\t活动详情\r\n\t\t\t</view>\r\n\t\t\t<view class=\"btn_item\" @click=\"onParticipationDetail\">\r\n\t\t\t\t参与详情\r\n\t\t\t</view>\r\n\t\t\t<view class=\"btn_item\" @click=\"onOpenRate\">\r\n\t\t\t\t评价活动\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"activity_tag\">\r\n\t\t\t{{ activeInfo.status }}\r\n\t\t</view>\r\n\r\n\t\t<uni-popup ref=\"rateActivityPopup\" type=\"bottom\" background-color=\"#fff\">\r\n\t\t\t<view class=\"popup_container\">\r\n\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t综合评分\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"right\" @click=\"onCloseRate\">\r\n\t\t\t\t\t\t取消\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"rate\">\r\n\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t你的评分：{{ rateValue }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t<uni-rate size=\"35\" allow-half v-model=\"rateValue\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"btn\" @click=\"onGitRate\">确定</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue'\r\n\timport formatTime from '@/utils/dateUtil.js'\r\n\timport {\r\n\t\tapiActivityRate\r\n\t} from '@/api/activity/index.js'\r\n\r\n\tconst props = defineProps(['activeInfo'])\r\n\tconst userId = uni.getStorageSync('userInfo').id\r\n\tconst rateActivityPopup = ref()\r\n\tconst rateValue = ref(0)\r\n\r\n\tfunction onActivityDetail() {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/activity/activityDetail/activityDetail?id=${props.activeInfo.id}`\r\n\t\t})\r\n\t}\r\n\r\n\tfunction onParticipationDetail() {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/user/myActivity/participationDetails/participationDetails?activeId=${props.activeInfo.id}`\r\n\t\t})\r\n\t}\r\n\r\n\tfunction onOpenRate() {\r\n\t\trateActivityPopup.value.open()\r\n\t}\r\n\r\n\tfunction onCloseRate() {\r\n\t\trateActivityPopup.value.close()\r\n\t\trateValue.value = 0\r\n\t}\r\n\r\n\tasync function onGitRate() {\r\n\r\n\t\tlet res = await apiActivityRate({\r\n\t\t\tactivityId: props.activeInfo.id,\r\n\t\t\tuserId: userId,\r\n\t\t\tscore: rateValue.value\r\n\t\t})\r\n\r\n\t\tif (res.code == 200) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ticon: 'success',\r\n\t\t\t\ttitle: res.message\r\n\t\t\t})\r\n\t\t}\r\n\t\tonCloseRate()\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.com-activity-item {\r\n\t\tposition: relative;\r\n\t\tmargin-bottom: 32rpx;\r\n\t\tpadding: 32rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 24rpx;\r\n\t\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.06);\r\n\t\tborder: 1px solid transparent;\r\n\t\ttransition: all 0.3s ease;\r\n\r\n\t\t.activity_info {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: flex-start;\r\n\t\t\tmargin-bottom: 40rpx;\r\n\t\t\tgap: 24rpx;\r\n\r\n\t\t\t.activity_info_left {\r\n\t\t\t\tflex-shrink: 0;\r\n\t\t\t\twidth: 240rpx;\r\n\t\t\t\theight: 180rpx;\r\n\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t&::after {\r\n\t\t\t\t\tcontent: '';\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\ttop: 0;\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\tright: 0;\r\n\t\t\t\t\tbottom: 0;\r\n\t\t\t\t\tbackground: linear-gradient(180deg,\r\n\t\t\t\t\t\t\trgba(0, 0, 0, 0) 70%,\r\n\t\t\t\t\t\t\trgba(0, 0, 0, 0.1) 100%);\r\n\t\t\t\t\tpointer-events: none;\r\n\t\t\t\t}\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tobject-fit: cover;\r\n\t\t\t\t\ttransition: transform 0.5s ease;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.activity_info_right {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tmin-width: 0;\r\n\r\n\t\t\t\t.title {\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\tcolor: #1a1a1a;\r\n\t\t\t\t\tline-height: 1.4;\r\n\t\t\t\t\tmargin-bottom: 16rpx;\r\n\t\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t\t-webkit-line-clamp: 2;\r\n\t\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.type {\r\n\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\tpadding: 6rpx 16rpx;\r\n\t\t\t\t\tbackground: rgba($uni-topic-color, 0.1);\r\n\t\t\t\t\tcolor: $uni-topic-color;\r\n\t\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\t\tborder-radius: 8rpx;\r\n\t\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.timer {\r\n\t\t\t\t\tfont-size: 10px;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.activity_btn {\r\n\t\t\tdisplay: flex;\r\n\t\t\tgap: 20rpx;\r\n\t\t\tmargin-bottom: 8rpx;\r\n\r\n\t\t\t.btn_item {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\theight: 68rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\ttransition: all 0.3s ease;\r\n\t\t\t\tposition: relative;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tborder: 2rpx solid #e8e8e8;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t\tbackground: #fafafa;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.activity_tag {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 32rpx;\r\n\t\t\tleft: 32rpx;\r\n\t\t\tpadding: 6rpx 20rpx;\r\n\t\t\tbackground: linear-gradient(135deg, #FF6B35, #FF8B5E);\r\n\t\t\tcolor: #fff;\r\n\t\t\tfont-size: 22rpx;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t\tline-height: 1;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tletter-spacing: 0.5rpx;\r\n\t\t\tz-index: 2;\r\n\t\t\tbox-shadow: 0 4rpx 12rpx rgba(255, 107, 53, 0.25);\r\n\r\n\t\t\t&::before {\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: -2rpx;\r\n\t\t\t\tleft: -2rpx;\r\n\t\t\t\tright: -2rpx;\r\n\t\t\t\tbottom: -2rpx;\r\n\t\t\t\tbackground: linear-gradient(135deg,\r\n\t\t\t\t\t\trgba(255, 107, 53, 0.4),\r\n\t\t\t\t\t\trgba(255, 139, 94, 0.4));\r\n\t\t\t\tborder-radius: 14rpx;\r\n\t\t\t\tz-index: -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.popup_container {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tpadding: 20rpx 20rpx 0 20rpx;\r\n\t\t\twidth: 100vw;\r\n\t\t\theight: 600rpx;\r\n\r\n\t\t\t.title {\r\n\t\t\t\theight: 90rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tborder-bottom: 1px solid #e0e0e0;\r\n\t\t\t}\r\n\r\n\t\t\t.rate {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t}\r\n\r\n\t\t\t.btn {\r\n\t\t\t\tborder-top: 1px solid #e0e0e0;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\theight: 90rpx;\r\n\t\t\t\tline-height: 90rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import Component from 'C:/Users/House/Desktop/graduation-project/campus_activity/pages/user/myActivity/components/com-activity-item/com-activity-item.vue'\nwx.createComponent(Component)"],"names":["uni","ref","apiActivityRate"],"mappings":";;;;;;;;;;;;;;;;;;AAgEC,UAAM,QAAQ;AACd,UAAM,SAASA,cAAG,MAAC,eAAe,UAAU,EAAE;AAC9C,UAAM,oBAAoBC,cAAAA,IAAK;AAC/B,UAAM,YAAYA,cAAG,IAAC,CAAC;AAEvB,aAAS,mBAAmB;AAC3BD,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,oDAAoD,MAAM,WAAW,EAAE;AAAA,MAC/E,CAAG;AAAA,IACD;AAED,aAAS,wBAAwB;AAChCA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,6EAA6E,MAAM,WAAW,EAAE;AAAA,MACxG,CAAG;AAAA,IACD;AAED,aAAS,aAAa;AACrB,wBAAkB,MAAM,KAAM;AAAA,IAC9B;AAED,aAAS,cAAc;AACtB,wBAAkB,MAAM,MAAO;AAC/B,gBAAU,QAAQ;AAAA,IAClB;AAED,mBAAe,YAAY;AAE1B,UAAI,MAAM,MAAME,mCAAgB;AAAA,QAC/B,YAAY,MAAM,WAAW;AAAA,QAC7B;AAAA,QACA,OAAO,UAAU;AAAA,MACpB,CAAG;AAED,UAAI,IAAI,QAAQ,KAAK;AACpBF,sBAAAA,MAAI,UAAU;AAAA,UACb,MAAM;AAAA,UACN,OAAO,IAAI;AAAA,QACf,CAAI;AAAA,MACD;AACD,kBAAa;AAAA,IACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxGF,GAAG,gBAAgB,SAAS;"}
{"version":3,"file":"userInfo.js","sources":["pages/user/userInfo/userInfo.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci91c2VySW5mby91c2VySW5mby52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"page container\">\r\n\t\t<!-- 头像区域 -->\r\n\t\t<view class=\"avatar-section\">\r\n\t\t\t<view class=\"avatar-wrapper\">\r\n\t\t\t\t<image :src=\"userAvatar\" mode=\"aspectFill\" class=\"avatar\" @click=\"upload\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 信息列表 -->\r\n\t\t<uni-list class=\"info-card\">\r\n\t\t\t<uni-list-item title=\"姓名\" :right-text=\"userInfo.realName\" class=\"info-item\" />\r\n\t\t\t<uni-list-item title=\"性别\" :right-text=\"userInfo.gender===1?'男':'女'\" class=\"info-item\" />\r\n\t\t\t<uni-list-item title=\"学校\" :right-text=\"userInfo.schoolName\" class=\"info-item\" />\r\n\t\t\t<uni-list-item title=\"学院\" :right-text=\"userInfo.collegeName\" class=\"info-item\" />\r\n\t\t\t<uni-list-item title=\"班级\" :right-text=\"userInfo.className\" class=\"info-item\" />\r\n\t\t</uni-list>\r\n\r\n\t\t<uni-list class=\"info-card contact-card\">\r\n\t\t\t<uni-list-item title=\"手机号\" :right-text=\"userInfo.phone\" class=\"info-item\" />\r\n\t\t\t<uni-list-item title=\"邮箱\" :right-text=\"userInfo.email\" class=\"info-item\" />\r\n\t\t</uni-list>\r\n\r\n\t\t<!-- 优化后的保存按钮 -->\r\n\t\t<view class=\"save-button-container\">\r\n\t\t\t<button class=\"save-btn\" @click=\"saveChanges\">\r\n\t\t\t\t<text class=\"btn-text\">保存修改</text>\r\n\t\t\t</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue'\r\n\timport convertCloudPath from '@/utils/convertCloudPath'\r\n\timport {\r\n\t\tapiImproveUserInfo\r\n\t} from '@/api/user/index.js'\r\n\r\n\tconst userInfo = uni.getStorageSync('userInfo')\r\n\tconst userAvatar = ref(userInfo.avatarUrl)\r\n\tconst filesName = ref()\r\n\r\n\tfunction upload() {\r\n\t\tuni.chooseImage({\r\n\t\t\tcount: 1,\r\n\t\t\tsuccess(e) {\r\n\t\t\t\tuserAvatar.value = e.tempFilePaths[0]\r\n\t\t\t\tfilesName.value = e.tempFiles[0].name\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tasync function saveChanges() {\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '保存成功',\r\n\t\t\ticon: 'success'\r\n\t\t})\r\n\r\n\t\tuniCloud.uploadFile({\r\n\t\t\tfilePath: userAvatar.value,\r\n\t\t\tcloudPath: `avatar/${new Date().getTime()}_${filesName.value}`,\r\n\t\t\tfileType: 'image',\r\n\t\t\tsuccess: async (e) => {\r\n\t\t\t\tlet filePath = convertCloudPath(e.fileID)\r\n\t\t\t\tuserInfo.avatarUrl = filePath\r\n\t\t\t\tlet res = await apiImproveUserInfo(userInfo.id, userInfo)\r\n\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\tuni.setStorageSync('userInfo', res.data.user)\r\n\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: '/pages/user/user'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t// 定义主色调变量\r\n\t$primary-color: #FCB857;\r\n\t$primary-light: #FFE6B7;\r\n\t$primary-dark: #E6A33D;\r\n\t$bg-color: #F8F9FA;\r\n\t$text-primary: #333333;\r\n\t$text-secondary: #666666;\r\n\t$text-light: #999999;\r\n\t$border-color: #F0F0F0;\r\n\t$white: #FFFFFF;\r\n\t$shadow-light: rgba(0, 0, 0, 0.08);\r\n\t$shadow-medium: rgba(0, 0, 0, 0.12);\r\n\r\n\t.page {\r\n\t\tbackground-color: $bg-color;\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t// 头像区域\r\n\t.avatar-section {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 60rpx 0 40rpx;\r\n\t\tbackground: linear-gradient(135deg, #FCB857 0%, #FF9800 100%);\r\n\t\tmargin-bottom: 30rpx;\r\n\t\toverflow: hidden;\r\n\r\n\t\t.avatar-bg {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tbackground: url(\"data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffcc80' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E\");\r\n\t\t\topacity: 0.5;\r\n\t\t}\r\n\r\n\t\t.avatar-wrapper {\r\n\t\t\tposition: relative;\r\n\t\t\tmargin-bottom: 30rpx;\r\n\t\t\tz-index: 1;\r\n\r\n\t\t\t.avatar {\r\n\t\t\t\twidth: 180rpx;\r\n\t\t\t\theight: 180rpx;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tbox-shadow: 0 12rpx 40rpx rgba(0, 0, 0, 0.15);\r\n\t\t\t\ttransition: all 0.3s ease;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.user-name {\r\n\t\t\tfont-size: 40rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: $white;\r\n\t\t\tletter-spacing: 1rpx;\r\n\t\t\ttext-shadow: 0 2rpx 4rpx rgba(0, 0, 0, 0.1);\r\n\t\t\tz-index: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t// 信息卡片\r\n\t.info-card {\r\n\t\tbackground: $white;\r\n\t\tborder-radius: 20rpx;\r\n\t\toverflow: hidden;\r\n\t\tmargin: 0 30rpx 30rpx;\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.04);\r\n\t\tborder: 1rpx solid $border-color;\r\n\t\ttransition: all 0.25s ease;\r\n\r\n\t\t:deep(.uni-list-item) {\r\n\t\t\tpadding: 30rpx 32rpx;\r\n\t\t\tborder-bottom: 1rpx solid $border-color;\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t&:last-child {\r\n\t\t\t\tborder-bottom: none;\r\n\t\t\t}\r\n\r\n\t\t\t&:not(:last-child):after {\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 32rpx;\r\n\t\t\t\tright: 32rpx;\r\n\t\t\t\tbottom: 0;\r\n\t\t\t\theight: 1rpx;\r\n\t\t\t\tbackground: $border-color;\r\n\t\t\t}\r\n\r\n\t\t\t.uni-list-item__container {\r\n\t\t\t\t.uni-list-item__content {\r\n\t\t\t\t\t.uni-list-item__content-title {\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\tcolor: $text-primary;\r\n\t\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\t\tletter-spacing: 1rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.uni-list-item__extra {\r\n\t\t\t\t\t.uni-list-item__extra-text {\r\n\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t\tcolor: $text-secondary;\r\n\t\t\t\t\t\tmax-width: 400rpx;\r\n\t\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\t\tfont-weight: 400;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.contact-card {\r\n\t\tmargin-bottom: 60rpx;\r\n\t}\r\n\r\n\t// 保存按钮容器\r\n\t.save-button-container {\r\n\t\tpadding: 20rpx 30rpx 60rpx;\r\n\t\tbackground: linear-gradient(to top, $bg-color 70%, transparent);\r\n\t\tposition: sticky;\r\n\t\tbottom: 0;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t// 保存按钮样式\r\n\t.save-btn {\r\n\t\tbackground: linear-gradient(135deg, $primary-color 0%, $primary-dark 100%);\r\n\t\tborder: none;\r\n\t\tborder-radius: 50rpx;\r\n\t\theight: 100rpx;\r\n\t\tline-height: 100rpx;\r\n\t\tfont-size: 34rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: $white;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 8rpx 30rpx rgba(252, 184, 87, 0.3);\r\n\t\ttransition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tgap: 16rpx;\r\n\r\n\r\n\t\t.btn-text {\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 1;\r\n\t\t\tletter-spacing: 2rpx;\r\n\t\t\ttransition: transform 0.3s ease;\r\n\t\t}\r\n\r\n\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/House/Desktop/graduation-project/campus_activity/pages/user/userInfo/userInfo.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","ref","uniCloud","convertCloudPath","apiImproveUserInfo"],"mappings":";;;;;;;;;;;;;;;;;AAyCC,UAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9C,UAAM,aAAaC,cAAAA,IAAI,SAAS,SAAS;AACzC,UAAM,YAAYA,cAAAA,IAAK;AAEvB,aAAS,SAAS;AACjBD,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,QAAQ,GAAG;AACV,qBAAW,QAAQ,EAAE,cAAc,CAAC;AACpC,oBAAU,QAAQ,EAAE,UAAU,CAAC,EAAE;AAAA,QACjC;AAAA,MACJ,CAAG;AAAA,IACD;AAED,mBAAe,cAAc;AAC5BA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,MACT,CAAG;AAEDE,oBAAAA,GAAS,WAAW;AAAA,QACnB,UAAU,WAAW;AAAA,QACrB,WAAW,WAAU,oBAAI,KAAM,GAAC,QAAO,CAAE,IAAI,UAAU,KAAK;AAAA,QAC5D,UAAU;AAAA,QACV,SAAS,OAAO,MAAM;AACrB,cAAI,WAAWC,uBAAAA,iBAAiB,EAAE,MAAM;AACxC,mBAAS,YAAY;AACrB,cAAI,MAAM,MAAMC,eAAAA,mBAAmB,SAAS,IAAI,QAAQ;AACxD,cAAI,IAAI,SAAS,KAAK;AACrBJ,0BAAAA,MAAI,eAAe,YAAY,IAAI,KAAK,IAAI;AAC5CA,0BAAAA,MAAI,SAAS;AAAA,cACZ,KAAK;AAAA,YACX,CAAM;AAAA,UACD;AAAA,QAED;AAAA,MACJ,CAAG;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7EF,GAAG,WAAW,eAAe;"}
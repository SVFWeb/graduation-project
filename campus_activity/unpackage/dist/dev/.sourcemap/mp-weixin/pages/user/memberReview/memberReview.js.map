{"version":3,"file":"memberReview.js","sources":["pages/user/memberReview/memberReview.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9tZW1iZXJSZXZpZXcvbWVtYmVyUmV2aWV3LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"member-review container\">\r\n\t\t<uni-list v-if=\"userList.length!=0\">\r\n\t\t\t<uni-list-item style=\"height: 170rpx;\" v-for=\"item in userList\" :key=\"item.id\" :title=\"item.realName\"\r\n\t\t\t\t:note=\"item.schoolName+item.collegeName+item.className\" :thumb=\"item.avatarUrl\" thumb-size=\"lg\">\r\n\t\t\t\t<!-- 自定义 footer-->\r\n\t\t\t\t<template v-slot:footer>\r\n\t\t\t\t\t<uni-tag v-for=\"tagItem in tagList\" class=\"tag\" :text=\"tagItem.title\"\r\n\t\t\t\t\t\t:type=\"tagItem.value?'primary':'error'\" @click=\"handleReview(tagItem.value,item.id)\" />\r\n\t\t\t\t</template>\r\n\t\t\t</uni-list-item>\r\n\t\t</uni-list>\r\n\t\t<view v-else class=\"empty-container\">\r\n\t\t\t<uni-icons type=\"info\" size=\"60\" color=\"#c0c4cc\"></uni-icons>\r\n\t\t\t<text class=\"empty-text\">暂无人员需要审核</text>\r\n\t\t</view>\r\n\r\n\t\t<uni-popup ref=\"managerReviewDialog\" type=\"dialog\">\r\n\t\t\t<uni-popup-dialog type=\"info\" confirmText=\"同意\" cancelText=\"取消\" content=\"是否确认此操作\" @confirm=\"managerReview\" />\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tonLoad\r\n\t} from '@dcloudio/uni-app'\r\n\timport {\r\n\t\tonMounted,\r\n\t\tref\r\n\t} from 'vue'\r\n\timport {\r\n\t\tapiGetMemberReviewList,\r\n\t\tapiMemberReview\r\n\t} from '@/api/activity/index.js'\r\n\r\n\tconst tagList = [{\r\n\t\t\ttitle: '同意',\r\n\t\t\tvalue: true\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: '拒绝',\r\n\t\t\tvalue: false\r\n\t\t}\r\n\t]\r\n\r\n\tconst managerReviewDialog = ref(null)\r\n\tconst activeId = ref('')\r\n\tconst userId = ref('')\r\n\tconst managerUserId = uni.getStorageSync('userInfo').id\r\n\tconst userList = ref([])\r\n\tconst changeValue = ref()\r\n\r\n\tasync function getMemberReviewList() {\r\n\t\tlet res = await apiGetMemberReviewList({\r\n\t\t\tactivityId: activeId.value,\r\n\t\t\tuserId: managerUserId\r\n\t\t})\r\n\r\n\t\tif (res.code == 200) {\r\n\t\t\tuserList.value = res.data.items\r\n\t\t}\r\n\t}\r\n\r\n\tasync function handleReview(value, id) {\r\n\t\tchangeValue.value = value\r\n\t\tuserId.value = id\r\n\t\tmanagerReviewDialog.value.open()\r\n\t}\r\n\r\n\tasync function managerReview() {\r\n\t\tlet res = await apiMemberReview({\r\n\t\t\tactivityId: activeId.value,\r\n\t\t\tuserId: userId.value,\r\n\t\t\tmanagerUserId,\r\n\t\t\tpass: changeValue.value,\r\n\t\t})\r\n\r\n\t\tif (res.code == 200) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.message,\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t}\r\n\t\tgetMemberReviewList()\r\n\r\n\t}\r\n\r\n\tonLoad((e) => {\r\n\t\tactiveId.value = e.id\r\n\t})\r\n\r\n\tonMounted(() => {\r\n\t\tgetMemberReviewList()\r\n\t})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.empty-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\theight: 60vh;\r\n\t\tpadding: 40rpx;\r\n\r\n\t\t.empty-text {\r\n\t\t\tmargin-top: 30rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #909399;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t}\r\n\r\n\t.tag {\r\n\t\tmargin-top: 30rpx;\r\n\t\tmargin-left: 15rpx;\r\n\t\theight: 30rpx;\r\n\t\ttext-align: center;\r\n\t\tline-height: 30rpx;\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/House/Desktop/graduation-project/campus_activity/pages/user/memberReview/memberReview.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","apiGetMemberReviewList","apiMemberReview","onLoad","onMounted"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAoCC,UAAM,UAAU;AAAA,MAAC;AAAA,QACf,OAAO;AAAA,QACP,OAAO;AAAA,MACP;AAAA,MACD;AAAA,QACC,OAAO;AAAA,QACP,OAAO;AAAA,MACP;AAAA,IACD;AAED,UAAM,sBAAsBA,cAAG,IAAC,IAAI;AACpC,UAAM,WAAWA,cAAG,IAAC,EAAE;AACvB,UAAM,SAASA,cAAG,IAAC,EAAE;AACrB,UAAM,gBAAgBC,cAAG,MAAC,eAAe,UAAU,EAAE;AACrD,UAAM,WAAWD,cAAG,IAAC,EAAE;AACvB,UAAM,cAAcA,cAAAA,IAAK;AAEzB,mBAAe,sBAAsB;AACpC,UAAI,MAAM,MAAME,0CAAuB;AAAA,QACtC,YAAY,SAAS;AAAA,QACrB,QAAQ;AAAA,MACX,CAAG;AAED,UAAI,IAAI,QAAQ,KAAK;AACpB,iBAAS,QAAQ,IAAI,KAAK;AAAA,MAC1B;AAAA,IACD;AAED,mBAAe,aAAa,OAAO,IAAI;AACtC,kBAAY,QAAQ;AACpB,aAAO,QAAQ;AACf,0BAAoB,MAAM,KAAM;AAAA,IAChC;AAED,mBAAe,gBAAgB;AAC9B,UAAI,MAAM,MAAMC,mCAAgB;AAAA,QAC/B,YAAY,SAAS;AAAA,QACrB,QAAQ,OAAO;AAAA,QACf;AAAA,QACA,MAAM,YAAY;AAAA,MACrB,CAAG;AAED,UAAI,IAAI,QAAQ,KAAK;AACpBF,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,IAAI;AAAA,UACX,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AACD,0BAAqB;AAAA,IAErB;AAEDG,kBAAM,OAAC,CAAC,MAAM;AACb,eAAS,QAAQ,EAAE;AAAA,IACrB,CAAE;AAEDC,kBAAAA,UAAU,MAAM;AACf,0BAAqB;AAAA,IACvB,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7FF,GAAG,WAAW,eAAe;"}
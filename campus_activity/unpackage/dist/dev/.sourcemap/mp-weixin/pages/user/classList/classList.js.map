{"version":3,"file":"classList.js","sources":["pages/user/classList/classList.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci9jbGFzc0xpc3QvY2xhc3NMaXN0LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"page container\">\r\n\t\t<!-- 加载状态 -->\r\n\t\t<view v-if=\"loading\" class=\"loading-container\">\r\n\t\t\t<uni-load-more status=\"loading\" :content-text=\"loadMoreText\"></uni-load-more>\r\n\t\t</view>\r\n\r\n\t\t<!-- 学校列表 -->\r\n\t\t<view v-else class=\"school-list\">\r\n\t\t\t<view v-for=\"(school, schoolIndex) in schoolData\" :key=\"schoolIndex\" class=\"school-item\">\r\n\t\t\t\t<!-- 学校标题 -->\r\n\t\t\t\t<view class=\"school-header\" @click=\"toggleSchool(schoolIndex)\">\r\n\t\t\t\t\t<view class=\"school-info\">\r\n\t\t\t\t\t\t<uni-icons :type=\"school.expanded ? 'arrowdown' : 'arrowright'\" size=\"20\" color=\"#666\"></uni-icons>\r\n\t\t\t\t\t\t<text class=\"school-name\">{{ school.name }}</text>\r\n\t\t\t\t\t\t<text class=\"school-count\">({{ getSchoolCount(school) }})</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 学院列表 -->\r\n\t\t\t\t<view v-if=\"school.expanded\" class=\"college-list\">\r\n\t\t\t\t\t<view v-for=\"(college, collegeIndex) in school.colleges\" :key=\"collegeIndex\" class=\"college-item\">\r\n\t\t\t\t\t\t<!-- 学院标题 -->\r\n\t\t\t\t\t\t<view class=\"college-header\" @click=\"toggleCollege(schoolIndex, collegeIndex)\">\r\n\t\t\t\t\t\t\t<view class=\"college-info\">\r\n\t\t\t\t\t\t\t\t<uni-icons :type=\"college.expanded ? 'arrowdown' : 'arrowright'\" size=\"18\" color=\"#888\"></uni-icons>\r\n\t\t\t\t\t\t\t\t<text class=\"college-name\">{{ college.name }}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"college-count\">({{ college.classes ? college.classes.length : 0 }})</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 班级列表 -->\r\n\t\t\t\t\t\t<view v-if=\"college.expanded && college.classes\" class=\"class-list\">\r\n\t\t\t\t\t\t\t<view v-for=\"(cls, classIndex) in college.classes\" :key=\"classIndex\" class=\"class-item\">\r\n\t\t\t\t\t\t\t\t<text class=\"class-name\">{{ cls.name }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view v-if=\"!college.classes || college.classes.length === 0\" class=\"empty-class\">\r\n\t\t\t\t\t\t\t\t<text class=\"empty-text\">暂无班级</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"!school.colleges || school.colleges.length === 0\" class=\"empty-college\">\r\n\t\t\t\t\t\t<text class=\"empty-text\">暂无学院</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"!schoolData || schoolData.length === 0\" class=\"empty-container\">\r\n\t\t\t\t<text class=\"empty-text\">暂无学校数据</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted\r\n\t} from 'vue'\r\n\timport {\r\n\t\tapiGetSchoolInfoTree\r\n\t} from '@/api/school/index.js'\r\n\r\n\tconst schoolData = ref([])\r\n\tconst loading = ref(false)\r\n\tconst loadMoreText = {\r\n\t\tcontentdown: '上拉加载更多',\r\n\t\tcontentrefresh: '加载中...',\r\n\t\tcontentnomore: '没有更多了'\r\n\t}\r\n\r\n\t// 获取学校信息树\r\n\tasync function getSchoolInfoTree() {\r\n\t\tloading.value = true\r\n\t\ttry {\r\n\t\t\tlet res = await apiGetSchoolInfoTree()\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\t// 为每个学校添加 expanded 属性\r\n\t\t\t\tschoolData.value = (res.data.items || []).map(school => ({\r\n\t\t\t\t\t...school,\r\n\t\t\t\t\texpanded: false,\r\n\t\t\t\t\tcolleges: (school.colleges || []).map(college => ({\r\n\t\t\t\t\t\t...college,\r\n\t\t\t\t\t\texpanded: false\r\n\t\t\t\t\t}))\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error('获取学校信息失败', e)\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '加载失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t} finally {\r\n\t\t\tloading.value = false\r\n\t\t}\r\n\t}\r\n\r\n\t// 切换学校展开/收起\r\n\tfunction toggleSchool(index) {\r\n\t\tschoolData.value[index].expanded = !schoolData.value[index].expanded\r\n\t}\r\n\r\n\t// 切换学院展开/收起\r\n\tfunction toggleCollege(schoolIndex, collegeIndex) {\r\n\t\tschoolData.value[schoolIndex].colleges[collegeIndex].expanded = \r\n\t\t\t!schoolData.value[schoolIndex].colleges[collegeIndex].expanded\r\n\t}\r\n\r\n\t// 获取学校总数（包括所有学院和班级）\r\n\tfunction getSchoolCount(school) {\r\n\t\tlet count = 0\r\n\t\tif (school.colleges) {\r\n\t\t\tschool.colleges.forEach(college => {\r\n\t\t\t\tif (college.classes) {\r\n\t\t\t\t\tcount += college.classes.length\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn count\r\n\t}\r\n\r\n\tonMounted(() => {\r\n\t\tgetSchoolInfoTree()\r\n\t})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t$primary-color: #FCB857;\r\n\t$bg-color: #F8F9FA;\r\n\t$text-primary: #333333;\r\n\t$text-secondary: #666666;\r\n\t$text-light: #999999;\r\n\t$border-color: #F0F0F0;\r\n\t$white: #FFFFFF;\r\n\r\n\t.page {\r\n\t\tbackground-color: $bg-color;\r\n\t\tmin-height: 100vh;\r\n\t}\r\n\r\n\t.page-header {\r\n\t\tbackground: linear-gradient(135deg, #FCB857 0%, #FF9800 100%);\r\n\t\tpadding: 60rpx 30rpx 40rpx;\r\n\t\tmargin: 0 -24rpx 30rpx -24rpx;\r\n\r\n\t\t.page-title {\r\n\t\t\tfont-size: 44rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: $white;\r\n\t\t\tletter-spacing: 1rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.loading-container {\r\n\t\tpadding: 100rpx 0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.school-list {\r\n\t\tmargin-top: 10rpx;\r\n\t\tpadding: 40rpx 32rpx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.04);\r\n\t\tborder: 1rpx solid $border-color;\r\n\t}\r\n\r\n\t.school-item {\r\n\t\tbackground: $white;\r\n\t\tborder-radius: 20rpx;\r\n\t\tmargin-bottom: 24rpx;\r\n\t\toverflow: hidden;\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.04);\r\n\t\tborder: 1rpx solid $border-color;\r\n\t}\r\n\r\n\t.school-header {\r\n\t\tpadding: 32rpx;\r\n\t\tborder-bottom: 1rpx solid $border-color;\r\n\t\tbackground: linear-gradient(135deg, rgba(252, 184, 87, 0.1) 0%, rgba(255, 152, 0, 0.1) 100%);\r\n\r\n\t\t.school-info {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tgap: 16rpx;\r\n\r\n\t\t\t.school-name {\r\n\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tcolor: $text-primary;\r\n\t\t\t}\r\n\r\n\t\t\t.school-count {\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: $text-secondary;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.college-list {\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t.college-item {\r\n\t\tborder-bottom: 1rpx solid $border-color;\r\n\r\n\t\t&:last-child {\r\n\t\t\tborder-bottom: none;\r\n\t\t}\r\n\t}\r\n\r\n\t.college-header {\r\n\t\tpadding: 24rpx 32rpx;\r\n\t\tbackground: rgba(248, 249, 250, 0.5);\r\n\r\n\t\t.college-info {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tgap: 12rpx;\r\n\r\n\t\t\t.college-name {\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tcolor: $text-primary;\r\n\t\t\t}\r\n\r\n\t\t\t.college-count {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tcolor: $text-secondary;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.class-list {\r\n\t\tpadding: 0 32rpx 16rpx 64rpx;\r\n\t}\r\n\r\n\t.class-item {\r\n\t\tpadding: 20rpx 0;\r\n\t\tborder-bottom: 1rpx solid rgba(240, 240, 240, 0.5);\r\n\r\n\t\t&:last-child {\r\n\t\t\tborder-bottom: none;\r\n\t\t}\r\n\r\n\t\t.class-name {\r\n\t\t\tfont-size: 30rpx;\r\n\t\t\tcolor: $text-secondary;\r\n\t\t}\r\n\t}\r\n\r\n\t.empty-container,\r\n\t.empty-college,\r\n\t.empty-class {\r\n\t\tpadding: 40rpx;\r\n\t\ttext-align: center;\r\n\r\n\t\t.empty-text {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: $text-light;\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n","import MiniProgramPage from 'C:/Users/House/Desktop/graduation-project/campus_activity/pages/user/classList/classList.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","apiGetSchoolInfoTree","uni","onMounted"],"mappings":";;;;;;;;;;;;;;;;AA8DC,UAAM,aAAaA,cAAG,IAAC,EAAE;AACzB,UAAM,UAAUA,cAAG,IAAC,KAAK;AACzB,UAAM,eAAe;AAAA,MACpB,aAAa;AAAA,MACb,gBAAgB;AAAA,MAChB,eAAe;AAAA,IACf;AAGD,mBAAe,oBAAoB;AAClC,cAAQ,QAAQ;AAChB,UAAI;AACH,YAAI,MAAM,MAAMC,sCAAsB;AACtC,YAAI,IAAI,SAAS,KAAK;AAErB,qBAAW,SAAS,IAAI,KAAK,SAAS,CAAE,GAAE,IAAI,aAAW;AAAA,YACxD,GAAG;AAAA,YACH,UAAU;AAAA,YACV,WAAW,OAAO,YAAY,CAAA,GAAI,IAAI,cAAY;AAAA,cACjD,GAAG;AAAA,cACH,UAAU;AAAA,YAChB,EAAO;AAAA,UACP,EAAM;AAAA,QACF;AAAA,MACD,SAAQ,GAAG;AACXC,sBAAAA,MAAA,MAAA,SAAA,4CAAc,YAAY,CAAC;AAC3BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAAA,MACJ,UAAY;AACT,gBAAQ,QAAQ;AAAA,MAChB;AAAA,IACD;AAGD,aAAS,aAAa,OAAO;AAC5B,iBAAW,MAAM,KAAK,EAAE,WAAW,CAAC,WAAW,MAAM,KAAK,EAAE;AAAA,IAC5D;AAGD,aAAS,cAAc,aAAa,cAAc;AACjD,iBAAW,MAAM,WAAW,EAAE,SAAS,YAAY,EAAE,WACpD,CAAC,WAAW,MAAM,WAAW,EAAE,SAAS,YAAY,EAAE;AAAA,IACvD;AAGD,aAAS,eAAe,QAAQ;AAC/B,UAAI,QAAQ;AACZ,UAAI,OAAO,UAAU;AACpB,eAAO,SAAS,QAAQ,aAAW;AAClC,cAAI,QAAQ,SAAS;AACpB,qBAAS,QAAQ,QAAQ;AAAA,UACzB;AAAA,QACL,CAAI;AAAA,MACD;AACD,aAAO;AAAA,IACP;AAEDC,kBAAAA,UAAU,MAAM;AACf,wBAAmB;AAAA,IACrB,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1HF,GAAG,WAAW,eAAe;"}
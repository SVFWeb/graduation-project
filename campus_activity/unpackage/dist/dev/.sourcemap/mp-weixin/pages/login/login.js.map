{"version":3,"file":"login.js","sources":["pages/login/login.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\n\t<view class=\"login-container\">\n\t\t<view class=\"login-header\">\n\t\t\t<text class=\"title\">欢迎回来</text>\n\t\t\t<text class=\"subtitle\">登录您的账号</text>\n\t\t</view>\n\t\t\n\t\t<view class=\"login-form\">\n\t\t\t<uni-forms ref=\"form\" :rules=\"rules\" :modelValue=\"formData\" label-position=\"top\">\n\t\t\t\t<uni-forms-item label=\"账号\" name=\"username\" required>\n\t\t\t\t\t<input \n\t\t\t\t\t\tclass=\"input\" \n\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\tv-model=\"formData.username\" \n\t\t\t\t\t\tplaceholder=\"请输入账号\"\n\t\t\t\t\t\tmaxlength=\"20\"\n\t\t\t\t\t\t@input=\"onInput('username', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</uni-forms-item>\n\t\t\t\t\n\t\t\t\t<uni-forms-item label=\"密码\" name=\"password\" required>\n\t\t\t\t\t<input \n\t\t\t\t\t\tclass=\"input\" \n\t\t\t\t\t\ttype=\"password\" \n\t\t\t\t\t\tv-model=\"formData.password\" \n\t\t\t\t\t\tplaceholder=\"请输入密码\"\n\t\t\t\t\t\tmaxlength=\"20\"\n\t\t\t\t\t\t@input=\"onInput('password', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</uni-forms-item>\n\t\t\t</uni-forms>\n\t\t\t\n\t\t\t<button class=\"login-btn\" @click=\"handleLogin\">登录</button>\n\t\t\t\n\t\t\t<view class=\"link-section\">\n\t\t\t\t<text class=\"link-text\" @click=\"goToRegister\">还没有账号？立即注册</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\n\timport { ref, reactive } from 'vue'\n\t\n\tconst form = ref(null)\n\tconst formData = reactive({\n\t\tusername: '',\n\t\tpassword: ''\n\t})\n\t\n\tconst rules = {\n\t\tusername: {\n\t\t\trules: [\n\t\t\t\t{ required: true, errorMessage: '请输入账号' }\n\t\t\t]\n\t\t},\n\t\tpassword: {\n\t\t\trules: [\n\t\t\t\t{ required: true, errorMessage: '请输入密码' },\n\t\t\t\t{ minLength: 6, errorMessage: '密码至少6位' }\n\t\t\t]\n\t\t}\n\t}\n\t\n\tconst onInput = (name, e) => {\n\t\tconst value = e.detail ? e.detail.value : e.target.value\n\t\tformData[name] = value\n\t\tif (form.value) {\n\t\t\tform.value.setValue(name, value)\n\t\t}\n\t}\n\t\n\tconst handleLogin = async () => {\n\t\ttry {\n\t\t\tawait form.value.validate()\n\t\t\t\n\t\t\t// 这里可以调用登录接口\n\t\t\t// 模拟登录成功，保存token（实际应该从接口获取）\n\t\t\tconst mockToken = 'token_' + Date.now()\n\t\t\tuni.setStorageSync('token', mockToken)\n\t\t\t\n\t\t\t// 检查是否完善了个人信息\n\t\t\tconst profileCompleted = uni.getStorageSync('profileCompleted')\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '登录成功',\n\t\t\t\ticon: 'success'\n\t\t\t})\r\n\t\t\t\r\n\t\t\tif (!profileCompleted) {\r\n\t\t\t\t// 未完善个人信息，跳转到完善信息页面\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: '/pages/userInfo/userInfo'\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\t// 已完善个人信息，跳转到首页\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t\t\n\t\t} catch (e) {\n\t\t\tconsole.log('表单校验失败', e)\n\t\t}\n\t}\n\t\n\tconst goToRegister = () => {\n\t\tuni.navigateTo({\n\t\t\turl: '/pages/registration/registration'\n\t\t})\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.login-container {\n\t\theight: 100vh;\n\t\tbackground: linear-gradient(180deg, #e6f4ff 0%, #f0f8ff 100%);\n\t\tpadding: 80rpx 60rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\t\n\t.login-header {\n\t\ttext-align: center;\n\t\tmargin-top: 100rpx;\n\t\tmargin-bottom: 100rpx;\n\t\t\n\t\t.title {\n\t\t\tdisplay: block;\n\t\t\tfont-size: 56rpx;\n\t\t\tfont-weight: bold;\n\t\t\tcolor: #1890ff;\n\t\t\tmargin-bottom: 20rpx;\n\t\t}\n\t\t\n\t\t.subtitle {\n\t\t\tdisplay: block;\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #409eff;\n\t\t}\n\t}\n\t\n\t.login-form {\n\t\tbackground: #ffffff;\n\t\tborder-radius: 16rpx;\n\t\tpadding: 60rpx 40rpx;\n\t\tbox-shadow: 0 4rpx 20rpx rgba(24, 144, 255, 0.15);\n\t}\n\t\n\t.input {\n\t\twidth: 100%;\n\t\theight: 88rpx;\n\t\tbackground: #fafafa;\n\t\tborder-radius: 8rpx;\n\t\tpadding: 0 24rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tbox-sizing: border-box;\n\t\tborder: 1rpx solid #d9ecff;\n\t\t\n\t\t&::placeholder {\n\t\t\tcolor: #999999;\n\t\t}\n\t}\n\t\n\t.login-btn {\n\t\twidth: 100%;\n\t\theight: 88rpx;\n\t\tbackground: #1890ff;\n\t\tborder-radius: 8rpx;\n\t\tcolor: #ffffff;\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 500;\n\t\tmargin-top: 40rpx;\n\t\tborder: none;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\t\n\t\t&::after {\n\t\t\tborder: none;\n\t\t}\n\t\t\n\t\t&:active {\n\t\t\topacity: 0.8;\n\t\t\tbackground: #40a9ff;\n\t\t}\n\t}\n\t\n\t.link-section {\n\t\ttext-align: center;\n\t\tmargin-top: 40rpx;\n\t\t\n\t\t.link-text {\n\t\t\tfont-size: 26rpx;\n\t\t\tcolor: #1890ff;\n\t\t}\n\t}\n</style>\n","import MiniProgramPage from 'C:/Users/House/Desktop/graduation-project/campus_activity/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","uni"],"mappings":";;;;;;;;;;;;;;;AA4CC,UAAM,OAAOA,cAAG,IAAC,IAAI;AACrB,UAAM,WAAWC,cAAAA,SAAS;AAAA,MACzB,UAAU;AAAA,MACV,UAAU;AAAA,IACZ,CAAE;AAED,UAAM,QAAQ;AAAA,MACb,UAAU;AAAA,QACT,OAAO;AAAA,UACN,EAAE,UAAU,MAAM,cAAc,QAAS;AAAA,QACzC;AAAA,MACD;AAAA,MACD,UAAU;AAAA,QACT,OAAO;AAAA,UACN,EAAE,UAAU,MAAM,cAAc,QAAS;AAAA,UACzC,EAAE,WAAW,GAAG,cAAc,SAAU;AAAA,QACxC;AAAA,MACD;AAAA,IACD;AAED,UAAM,UAAU,CAAC,MAAM,MAAM;AAC5B,YAAM,QAAQ,EAAE,SAAS,EAAE,OAAO,QAAQ,EAAE,OAAO;AACnD,eAAS,IAAI,IAAI;AACjB,UAAI,KAAK,OAAO;AACf,aAAK,MAAM,SAAS,MAAM,KAAK;AAAA,MAC/B;AAAA,IACD;AAED,UAAM,cAAc,YAAY;AAC/B,UAAI;AACH,cAAM,KAAK,MAAM,SAAU;AAI3B,cAAM,YAAY,WAAW,KAAK,IAAK;AACvCC,4BAAI,eAAe,SAAS,SAAS;AAGrC,cAAM,mBAAmBA,cAAAA,MAAI,eAAe,kBAAkB;AAE9DA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAI;AAED,YAAI,CAAC,kBAAkB;AAEtBA,wBAAAA,MAAI,SAAS;AAAA,YACZ,KAAK;AAAA,UACV,CAAK;AAAA,QACL,OAAU;AAENA,wBAAAA,MAAI,SAAS;AAAA,YACZ,KAAK;AAAA,UACV,CAAK;AAAA,QACD;AAAA,MAED,SAAQ,GAAG;AACXA,sBAAAA,MAAY,MAAA,OAAA,gCAAA,UAAU,CAAC;AAAA,MACvB;AAAA,IACD;AAED,UAAM,eAAe,MAAM;AAC1BA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GF,GAAG,WAAW,eAAe;"}
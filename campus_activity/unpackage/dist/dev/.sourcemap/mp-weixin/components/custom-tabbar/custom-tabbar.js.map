{"version":3,"file":"custom-tabbar.js","sources":["components/custom-tabbar/custom-tabbar.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvSG91c2UvRGVza3RvcC9ncmFkdWF0aW9uLXByb2plY3QvY2FtcHVzX2FjdGl2aXR5L2NvbXBvbmVudHMvY3VzdG9tLXRhYmJhci9jdXN0b20tdGFiYmFyLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"custom-tabbar\">\r\n\t\t<view class=\"tabbar-container\">\r\n\t\t\t<view v-for=\"(item, index) in tabList\" :key=\"index\" class=\"tabbar-item\"\r\n\t\t\t\t:class=\"{ 'active': currentPath === item.pagePath }\" @click=\"switchTab(item)\">\r\n\t\t\t\t<image :src=\"currentPath === item.pagePath ? item.selectedIconPath : item.iconPath\" class=\"tabbar-icon\"\r\n\t\t\t\t\tmode=\"aspectFit\" />\r\n\t\t\t\t<text class=\"tabbar-text\">{{ item.text }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 安全区域占位 -->\r\n\t\t<view class=\"safety-area\"></view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tcomputed,\r\n\t\tonMounted\r\n\t} from 'vue'\r\n\timport {\r\n\t\tonShow\r\n\t} from '@dcloudio/uni-app'\r\n\r\n\t// 所有tab配置\r\n\tconst allTabs = [{\r\n\t\t\ttext: \"主页\",\r\n\t\t\tpagePath: \"/pages/index/index\",\r\n\t\t\ticonPath: \"/static/image/iconfonts/主页.png\",\r\n\t\t\tselectedIconPath: \"/static/image/iconfonts/主页 (1).png\"\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: \"活动\",\r\n\t\t\tpagePath: \"/pages/activity/activity\",\r\n\t\t\ticonPath: \"/static/image/iconfonts/活动.png\",\r\n\t\t\tselectedIconPath: \"/static/image/iconfonts/活动 (1).png\"\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: \"扫码签到\",\r\n\t\t\tpagePath: \"/pages/scanCode/scanCode\",\r\n\t\t\ticonPath: \"/static/image/iconfonts/扫码.png\",\r\n\t\t\tselectedIconPath: \"/static/image/iconfonts/扫码 (1).png\",\r\n\t\t\trequireAuth: true // 需要登录\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: \"我的活动\",\r\n\t\t\tpagePath: \"/pages/myActivity/myActivity\",\r\n\t\t\ticonPath: \"/static/image/iconfonts/活动报名.png\",\r\n\t\t\tselectedIconPath: \"/static/image/iconfonts/活动报名 (1).png\",\r\n\t\t\trequireAuth: true // 需要登录\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: \"个人\",\r\n\t\t\tpagePath: \"/pages/user/user\",\r\n\t\t\ticonPath: \"/static/image/iconfonts/个人.png\",\r\n\t\t\tselectedIconPath: \"/static/image/iconfonts/个人 (1).png\"\r\n\t\t}\r\n\t]\r\n\r\n\tconst currentPath = ref('')\r\n\r\n\t// 根据token状态过滤tab列表\r\n\tconst tabList = computed(() => {\r\n\t\treturn allTabs.filter(tab => {\r\n\t\t\tconst token = uni.getStorageSync('token')\r\n\t\t\t// 如果tab需要登录但用户未登录，则隐藏\r\n\t\t\tif (tab.requireAuth && !token) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t})\r\n\r\n\t// 更新当前路径\r\n\tfunction updateCurrentPath() {\r\n\t\t// 获取页面栈\r\n\t\tconst pages = getCurrentPages()\r\n\t\t// 页面栈还没初始化或当前没有页面\r\n\t\tif (pages.length === 0) return\r\n\t\t// 获取栈顶页面（当前显示页面）\r\n\t\tconst currentPage = pages[pages.length - 1]\r\n\t\tcurrentPath.value = '/' + currentPage.route\r\n\t}\r\n\r\n\t// 切换tab\r\n\tfunction switchTab(item) {\r\n\t\t// 如果点击的是当前页面，不执行跳转\r\n\t\tif (currentPath.value === item.pagePath) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tuni.switchTab({\r\n\t\t\turl: item.pagePath\r\n\t\t})\r\n\t}\r\n\r\n\tonMounted(() => {\r\n\t\tupdateCurrentPath()\r\n\t})\r\n\r\n\t// 使用onShow生命周期\r\n\tonShow(() => {\r\n\t\tupdateCurrentPath()\r\n\t})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.custom-tabbar {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-top: 1px solid #e5e5e5;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.tabbar-container {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-around;\r\n\t\tpadding: 10rpx 0;\r\n\t\theight: 98rpx;\r\n\t}\r\n\r\n\t.tabbar-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t\ttransition: all 0.3s;\r\n\t}\r\n\r\n\t.tabbar-icon {\r\n\t\twidth: 44rpx;\r\n\t\theight: 44rpx;\r\n\t\tmargin-bottom: 4rpx;\r\n\t}\r\n\r\n\t.tabbar-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #bfbfbf;\r\n\t\ttransition: color 0.3s;\r\n\t}\r\n\r\n\t.tabbar-item.active .tabbar-text {\r\n\t\tcolor: #007aff;\r\n\t}\r\n\r\n\t.safety-area {\r\n\t\twidth: 100%;\r\n\t\theight: env(safe-area-inset-bottom);\r\n\t\tbackground-color: #ffffff;\r\n\t}\r\n</style>","import Component from 'C:/Users/House/Desktop/graduation-project/campus_activity/components/custom-tabbar/custom-tabbar.vue'\nwx.createComponent(Component)"],"names":["ref","computed","uni","onMounted","onShow"],"mappings":";;;;;AA0BC,UAAM,UAAU;AAAA,MAAC;AAAA,QACf,MAAM;AAAA,QACN,UAAU;AAAA,QACV,UAAU;AAAA,QACV,kBAAkB;AAAA,MAClB;AAAA,MACD;AAAA,QACC,MAAM;AAAA,QACN,UAAU;AAAA,QACV,UAAU;AAAA,QACV,kBAAkB;AAAA,MAClB;AAAA,MACD;AAAA,QACC,MAAM;AAAA,QACN,UAAU;AAAA,QACV,UAAU;AAAA,QACV,kBAAkB;AAAA,QAClB,aAAa;AAAA;AAAA,MACb;AAAA,MACD;AAAA,QACC,MAAM;AAAA,QACN,UAAU;AAAA,QACV,UAAU;AAAA,QACV,kBAAkB;AAAA,QAClB,aAAa;AAAA;AAAA,MACb;AAAA,MACD;AAAA,QACC,MAAM;AAAA,QACN,UAAU;AAAA,QACV,UAAU;AAAA,QACV,kBAAkB;AAAA,MAClB;AAAA,IACD;AAED,UAAM,cAAcA,cAAG,IAAC,EAAE;AAG1B,UAAM,UAAUC,cAAAA,SAAS,MAAM;AAC9B,aAAO,QAAQ,OAAO,SAAO;AAC5B,cAAM,QAAQC,cAAAA,MAAI,eAAe,OAAO;AAExC,YAAI,IAAI,eAAe,CAAC,OAAO;AAC9B,iBAAO;AAAA,QACP;AACD,eAAO;AAAA,MACV,CAAG;AAAA,IACH,CAAE;AAGD,aAAS,oBAAoB;AAE5B,YAAM,QAAQ,gBAAiB;AAE/B,UAAI,MAAM,WAAW;AAAG;AAExB,YAAM,cAAc,MAAM,MAAM,SAAS,CAAC;AAC1C,kBAAY,QAAQ,MAAM,YAAY;AAAA,IACtC;AAGD,aAAS,UAAU,MAAM;AAExB,UAAI,YAAY,UAAU,KAAK,UAAU;AACxC;AAAA,MACA;AAEDA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK,KAAK;AAAA,MACb,CAAG;AAAA,IACD;AAEDC,kBAAAA,UAAU,MAAM;AACf,wBAAmB;AAAA,IACrB,CAAE;AAGDC,kBAAAA,OAAO,MAAM;AACZ,wBAAmB;AAAA,IACrB,CAAE;;;;;;;;;;;;;;;;;ACvGF,GAAG,gBAAgB,SAAS;"}